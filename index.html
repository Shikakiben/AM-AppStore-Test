<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AM App Store</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="refresh-spinner-fix.css">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ccircle cx='8' cy='8' r='7' fill='%233584e4'/%3E%3C/svg%3E">
  <meta name="color-scheme" content="light dark" />
  <!-- Mise √† jour CSP: autoriser les requ√™tes (fetch) vers portable-linux-apps.github.io pour r√©cup√©rer les descriptions -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' appicon: https: data:; style-src 'self' 'unsafe-inline'; script-src 'self'; connect-src 'self' https://portable-linux-apps.github.io;">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</head>
<body>
  <header class="app-header" data-tauri-drag-region>
    <div class="brand">
      <div class="brand-icon" aria-hidden="true">üõçÔ∏è</div>
      <div class="brand-title">AM App Store</div>
    </div>
    <div class="header-center" role="search" aria-label="Recherche">
      <div class="search">
        <span class="search-icon" aria-hidden="true">üîç</span>
        <input id="searchInput" type="search" placeholder="Rechercher des applications‚Ä¶" autocomplete="off" />
      </div>
    </div>
    <div class="header-right">
      <div class="global-actions">
  <button id="settingsBtn" class="btn btn-outline btn-settings" title="Param√®tres (Ctrl+,)" aria-haspopup="true" aria-expanded="false" aria-controls="settingsPanel"><span class="gear-icon" aria-hidden="true">‚öô</span></button>
        <div id="settingsPanel" class="settings-panel settings-panel-right" role="dialog" aria-modal="false" aria-label="Param√®tres" hidden tabindex="-1">
          <div class="settings-group">
            <div class="settings-title">Th√®me</div>
            <label><input type="radio" name="themePref" value="system" checked> Syst√®me</label>
            <label><input type="radio" name="themePref" value="light"> Clair</label>
            <label><input type="radio" name="themePref" value="dark"> Sombre</label>
          </div>
          <div class="settings-separator"></div>
          <div class="settings-group">
            <div class="settings-title">√Ä venir</div>
            <div style="font-size:12px; opacity:.7; line-height:1.4;">De nouvelles options seront ajout√©es ici prochainement.</div>
            <div style="margin-top:10px; display:flex; flex-direction:column; gap:6px;">
              <button id="purgeIconsBtn" class="mini-btn" type="button" style="align-self:flex-start; font-size:12px; padding:6px 10px; border:1px solid var(--border); background:var(--card); border-radius:8px; cursor:pointer;">Vider le cache des ic√¥nes</button>
              <div id="purgeIconsResult" style="font-size:11px; opacity:.65;"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="window-buttons" aria-label="Fen√™tre">
        <button class="win-btn" data-action="min" title="R√©duire">‚Äì</button>
        <button class="win-btn" data-action="max" title="Maximiser / Restaurer">‚¨ú</button>
        <button class="win-btn win-close" data-action="close" title="Fermer">√ó</button>
      </div>
    </div>
  </header>
  <div class="sub-bar" role="toolbar" aria-label="Navigation des onglets">
    <div class="tabs-row">
      <nav class="tabs" role="tablist" aria-label="Cat√©gories">
        <button class="tab active" role="tab" aria-selected="true" data-category="all">Tout</button>
        <button class="tab" role="tab" aria-selected="false" data-category="installed">Install√©es <span id="installedCount" class="badge">0</span></button>
        <button class="tab" role="tab" aria-selected="false" data-category="updates">Mises √† jour</button>
        <button class="tab" role="tab" aria-selected="false" data-category="advanced">Mode avanc√©</button>
      </nav>
      <div class="view-mode-switch" role="group" aria-label="Mode d'affichage">
  <button id="refreshBtn" class="btn btn-outline btn-refresh" title="Rafra√Æchir la liste" aria-label="Rafra√Æchir"><span class="icon" aria-hidden="true">‚Üª</span></button>
        <button id="modeMenuBtn" class="btn btn-outline" aria-haspopup="true" aria-expanded="false" aria-controls="modeMenu" title="Changer de mode d'affichage">‚ñ¶</button>
        <div id="modeMenu" class="mode-menu" role="menu" hidden>
          <button class="mode-option" data-mode="grid" role="menuitem" aria-pressed="true">‚ñ¶ Grille</button>
          <button class="mode-option" data-mode="list" role="menuitem" aria-pressed="false">‚â£ Liste</button>
          <button class="mode-option" data-mode="icons" role="menuitem" aria-pressed="false">‚óªÔ∏é Ic√¥nes</button>
          <button class="mode-option" data-mode="cards" role="menuitem" aria-pressed="false">üÇ† Cartes</button>
        </div>
      </div>
    </div>
  </div>
  <div class="scroll-shell">
    <main class="content" id="mainContent">
      <!-- Updates panel moved to top to avoid big blank space when apps list hidden -->
      <section id="updatesPanel" class="panel-lite updates-panel" hidden>
        <h2 class="panel-heading-xl">Mettre √† jour AM et toutes les applications install√©es</h2>
        <div class="updates-actions-row">
          <button id="runUpdatesBtn" class="btn btn-primary updates-run">Mettre √† jour</button>
        </div>
        <div id="updateSpinner" class="update-spinner" role="status" aria-live="polite" hidden>
          <div class="spinner" aria-hidden="true"></div>
          <div class="spinner-label" data-i18n="updates.loading">Recherche de mises √† jour et installation si n√©cessaire‚Ä¶</div>
        </div>
        <div id="updateResult" class="update-result" style="display:none;">
          <div id="updateFinalMessage" class="update-final-message"></div>
          <div id="updatedAppsIcons" class="icons-row updated-icons"></div>
          <div class="raw-link-row"><button id="showRawUpdateBtn" class="mini-btn-link" type="button">Voir les d√©tails‚Ä¶</button></div>
        </div>
      </section>
      <section id="advancedPanel" class="panel-lite advanced-panel" hidden>
        <h2 class="panel-heading-sm">Mode avanc√©</h2>
        <p class="placeholder-strong">√Ä venir</p>
        <p class="placeholder-sub">De nouvelles options seront ajout√©es ici prochainement.</p>
      </section>
      <div id="apps" class="app-list" aria-live="polite" aria-busy="true"></div>
      <section id="appDetails" class="app-details" hidden>
        <button id="backToListBtn" class="btn btn-outline back-btn">‚Üê Retour</button>
        <div class="details-header">
          <img id="detailsIcon" alt="Ic√¥ne" />
          <div class="details-head-text">
            <h2 id="detailsName"></h2>
          </div>
        </div>
        <div class="details-actions">
          <button id="detailsInstallBtn" class="btn btn-primary">Installer</button>
          <button id="detailsForceCancelBtn" class="btn btn-outline danger" title="Forcer l'annulation" aria-label="Forcer l'annulation" hidden style="padding:6px 10px;">‚úï</button>
          <button id="detailsUninstallBtn" class="btn btn-outline">D√©sinstaller</button>
        </div>
        <div id="installStream" class="install-stream" hidden>
          <div class="install-stream-head">
            <div class="install-stream-status" id="installStreamStatus">En cours‚Ä¶</div>
            <div class="install-stream-meta"><span id="installStreamElapsed">0s</span> ‚Äì <span id="installStreamLines">0 lignes</span> ¬∑ <button id="installStreamToggle" class="mini-link-btn" aria-expanded="false" type="button">Afficher le log</button></div>
          </div>
            <pre id="installStreamLog" class="install-stream-log" aria-label="Journal installation" tabindex="0" hidden></pre>
        </div>
        <div class="details-long-wrapper">
          <h3 class="details-section-title">Description</h3>
          <p id="detailsLong" class="details-long"></p>
        </div>
        <div id="detailsGallery" class="details-gallery" hidden>
          <h3 class="details-gallery-title">Captures</h3>
          <div id="detailsGalleryInner" class="gallery-row"></div>
        </div>
      </section>
    </main>

    <div id="toast" class="toast" role="status" aria-live="polite" hidden></div>
  </div>

  <!-- Lightbox pour les captures -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="Aper√ßu de la capture" hidden>
    <button id="lightboxClose" class="lightbox-close" aria-label="Fermer">‚úï</button>
    <button id="lightboxPrev" class="lightbox-nav prev" aria-label="Pr√©c√©dente">‚Äπ</button>
    <figure class="lightbox-figure">
      <img id="lightboxImage" alt="Capture" />
      <figcaption id="lightboxCaption" class="lightbox-caption"></figcaption>
    </figure>
    <button id="lightboxNext" class="lightbox-nav next" aria-label="Suivante">‚Ä∫</button>
  </div>

  <!-- Modale sortie brute mises √† jour -->
  <div id="rawUpdateModal" class="modal" role="dialog" aria-modal="true" aria-label="Sortie de la mise √† jour" hidden>
    <div class="modal-dialog">
      <div class="modal-header">
        <h3 class="modal-title">D√©tails de la mise √† jour</h3>
        <button id="rawUpdateClose" class="modal-close" aria-label="Fermer">‚úï</button>
      </div>
      <div class="modal-body">
        <pre id="rawUpdatePre" class="raw-pre" aria-label="Sortie brute" tabindex="0"></pre>
      </div>
      <div class="modal-footer">
        <button id="rawCopyBtn" class="mini-btn" type="button">Copier</button>
        <button id="rawSaveBtn" class="mini-btn" type="button">Enregistrer‚Ä¶</button>
        <div class="grow"></div>
        <button id="rawUpdateClose2" class="btn btn-outline" type="button">Fermer</button>
      </div>
    </div>
  </div>

  <!-- Modale confirmation compacte (sans titre ni croix) -->
  <div id="actionConfirmModal" class="modal" role="dialog" aria-modal="true" aria-label="Confirmation" hidden>
    <div class="modal-dialog confirm-dialog" role="document">
      <div class="confirm-body">
        <p id="actionConfirmMessage" class="confirm-message"></p>
        <div class="confirm-actions">
          <button id="actionConfirmCancel" class="btn btn-soft-neutral" type="button">Annuler</button>
          <button id="actionConfirmOk" class="btn" type="button">Valider</button>
        </div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
